(this["webpackJsonpuse-websocket-lite-example"]=this["webpackJsonpuse-websocket-lite-example"]||[]).push([[0],{12:function(e,t,n){"use strict";n.r(t);n(6),n(7);var a=n(0),c=n.n(a),r=n(3),l=n.n(r),o=n(1),s=n(4);var u=function(e){var t=e.socketUrl,n=e.token,c=e.retry,r=void 0===c?3:c,l=e.retryInterval,u=void 0===l?1500:l,i=Object(a.useState)(),m=Object(o.a)(i,2),f=m[0],d=m[1],v=Object(a.useState)((function(){return function(){}})),E=Object(o.a)(v,2),b=E[0],p=E[1],h=Object(a.useState)(r),k=Object(o.a)(h,2),w=k[0],O=k[1],g=Object(a.useState)(!1),S=Object(o.a)(g,2),j=S[0],y=S[1];return Object(a.useEffect)((function(){var e=[t];n&&e.push(n);var a=Object(s.a)(WebSocket,e);return a.onopen=function(){console.log("Connected to socket"),y(!0),p((function(){return function(e){try{var t=JSON.stringify(e);return a.send(t),!0}catch(n){return!1}}})),a.onmessage=function(e){var t=function(e){try{return JSON.parse(e)}catch(t){return e}}(e.data);d({message:t,timestamp:(new Date).getTime()})}},a.onclose=function(){y(!1),w>0&&setTimeout((function(){O((function(e){return e-1}))}),u)},function(){a.close()}}),[w]),{send:b,data:f,readyState:j}};var i=function(){var e=Object(a.useState)([c.a.createElement("span",null,"Messages will be displayed here")]),t=Object(o.a)(e,2),n=t[0],r=t[1],l=Object(a.useRef)(),s=u({socketUrl:"wss://echo.websocket.org"});Object(a.useEffect)((function(){if(s.data){var e=s.data.message;r((function(t){return[].concat(function(e){return c.a.createElement("span",null,"\u2b07: ",e)}(e),t)}))}}),[s.data]);var i=s.readyState?"Open":"Closed";return c.a.createElement("div",null,c.a.createElement("div",null,c.a.createElement("h6",null,c.a.createElement("div",null,"Socket Url: wss://echo.websocket.org"),c.a.createElement("div",null,"Connection State:"," ",c.a.createElement("span",{className:"connection "+i.toLowerCase()},i))),c.a.createElement("form",null,c.a.createElement("label",null,"Message (string or json)"),c.a.createElement("textarea",{name:"message",rows:4,ref:l}),c.a.createElement("input",{type:"button",onClick:function(){var e=l.current.value||"";e&&(r((function(t){return[].concat(function(e){return c.a.createElement("span",null,"\u2b06: ",e)}(e),t)})),s.send(e))},value:"Send"}))),c.a.createElement("div",{style:{height:300,overflowY:"scroll"}},n.map((function(e,t){return c.a.createElement("div",{key:t},e)}))))};function m(){return c.a.createElement("div",null,c.a.createElement("div",{className:"container"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"column column-80 column-offset-10 ta-center"},c.a.createElement("h3",{style:{marginBottom:"0.5rem"}},"use-websocket-lite"),c.a.createElement("h5",null,"A clean and minimal react hook around client WebSocket"))),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"column column-80 column-offset-10 app"},c.a.createElement(i,null))),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"column column-100"},c.a.createElement("div",{className:"footer ta-center"},c.a.createElement("a",{href:"https://github.com/Kailash-Sankar/use-websocket-lite"},"Kailash Sankar, April 2020"))))))}l.a.render(c.a.createElement(m,null),document.getElementById("root"))},5:function(e,t,n){e.exports=n(12)},6:function(e,t,n){},7:function(e,t,n){}},[[5,1,2]]]);
//# sourceMappingURL=main.6779b097.chunk.js.map